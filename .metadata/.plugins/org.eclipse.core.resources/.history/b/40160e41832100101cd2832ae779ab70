package MiniProject;

import java.time.Duration;
import java.util.Scanner;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.support.ui.WebDriverWait;

public class SearchForSchools {

	private static WebDriver driver;
	private WebDriverWait wait;
	private static String baseUrl="https://www.eduvidya.com/";
	
	public void createDriver(String browser) {
		
		if(browser.equalsIgnoreCase("chrome")) {
			
			driver=new ChromeDriver();
		}else if(browser.equalsIgnoreCase("firefox")) {
			
			driver=new FirefoxDriver();
		}else {
			throw new IllegalArgumentException("Unsupported Broweser");
		}
		wait=new WebDriverWait(driver,Duration.ofSeconds(10));
		driver.manage().window().maximize();
		
	}
	
	public void Eduvidya(){
		try {			
			driver.get(baseUrl);
			wait.until(ExpectedConditions.titleContains("Eduvidya"));
			//school link
			wait.until(
		    ExpectedConditions.elementToBeClickable((By.xpath("/html[1]/body[1]/div[1]/div[1]/div[2]/ul[1]/li[4]/a[1]"))
		    ));
			//course selection
		    WebElement course=wait.until(ExpectedConditions.presenceOfElementLocated(By.id("ddl_Category")));
		    Select choice=new Select(course);
		    choice.selectByVisibleText("CBSE");
		   
		    //city selection    
		    WebElement city=wait.until(ExpectedConditions.presenceOfElementLocated(By.id("ddl_City")));
		    Select choice1=new Select(city);
		    choice1.selectByVisibleText("Pune");
		
		    //search
		    WebElement search= wait.until(ExpectedConditions.elementToBeClickable(By.name("ctl00$cp_left$btnSearch")));
		    search.click();
		    wait.until(ExpectedConditions.presenceOfElementLocated(By.id("btnSearch")));
		   
		    
		}catch(Exception e) {
			e.printStackTrace();
		}		
	}
	
	public static void main(String[] args) {
	
		SearchForSchools edu=new SearchForSchools();
		Scanner sc=new Scanner(System.in);
		String browser=sc.next();
		edu.createDriver(browser);
		edu.Eduvidya();
		System.out.println("Finally results are displayed !! Happy Endingg");
		driver.close();
	}

}
