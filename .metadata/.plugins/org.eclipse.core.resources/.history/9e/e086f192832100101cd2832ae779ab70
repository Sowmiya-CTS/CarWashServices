package MiniProject;

import java.time.Duration;
import java.util.HashMap;
import java.util.Map;
import java.util.Scanner;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.FindBy;
import org.openqa.selenium.support.PageFactory;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.support.ui.WebDriverWait;

public class SearchForSchools extends TestDriver{
	private static WebDriver driver;
	private WebDriverWait wait;
	private final String baseUrl="https://www.eduvidya.com/";
	
	public void setup(String browser) {
		if(browser.equalsIgnoreCase("chrome")) {
			driver=new ChromeDriver(); 
		}else if(browser.equalsIgnoreCase("firefox")) {
			driver=new FirefoxDriver();
		}else {
			throw new IllegalArgumentException("unsupported browser");
		}
		wait=new WebDriverWait(driver,Duration.ofSeconds(10));
		driver.manage().window().maximize();
		
	}
	public void Eduvidya(Map<String,String> testData){
		try {			
			driver.get(baseUrl);
			wait.until(ExpectedConditions.titleContains("Eduvidya"));
			//school link
			wait.until(
		    ExpectedConditions.elementToBeClickable((By.xpath("/html[1]/body[1]/div[1]/div[1]/div[2]/ul[1]/li[4]/a[1]"))
		    ));
			//course selection
		    WebElement course=wait.until(ExpectedConditions.presenceOfElementLocated(By.id("ddl_Category")));
		    Select choice=new Select(course);
		    choice.selectByVisibleText("CBSE");
		   
		    //city selection    
		    WebElement city=wait.until(ExpectedConditions.presenceOfElementLocated(By.id("ddl_City")));
		    Select choice1=new Select(city);
		    choice1.selectByVisibleText("Pune");
		
		    //search
		    WebElement search= wait.until(ExpectedConditions.elementToBeClickable(By.name("ctl00$cp_left$btnSearch")));
		    search.click();
		    wait.until(ExpectedConditions.presenceOfElementLocated(By.id("btnSearch")));
		    

		    System.out.println("Test Completed successfully - CBSE schools in Pune are displayed");
		    
		}catch(Exception e) {
			System.out.println("Test failed with exception"+e.getMessage());
			throw e;
		}		
	}
	public String[][] provideData(){
		return ExcelReader.getTestData("test-data/testdata.xlsx");
	}
	
	public static void main(String...args) {
		SearchForSchools school=new SearchForSchools();
		school.setup("chrome");
		try {
			HashMap<String,String> testData=new HashMap<>();
			testData.put("CourseType","CBSE");
			testData.put("City","Pune");
			
			school.Eduvidya(testData);
			System.out.println("Test completed successfully");
		}catch(Exception e) {
			System.out.println("Test failed"+e.getMessage());
			
		}
	}
	
	
}
//@FindBy(id="ddl_Category")
//private WebElement courseDropDown;
//
//@FindBy(id="ddl_City")
//private WebElement cityDropDown;
//
//@FindBy(name="ctl00$cp_left$btnSearch")
//private WebElement search;
//
//public SchoolSearchPage(WebDriver driver) {
//	this.driver=driver;
//	PageFactory.initElements(driver,this);
//}
//
//public void selectCourseType(String course) {
//	new Select(courseDropDown).selectByVisibleText(course);
//}
//
//public void selectCityType(String city) {
//	new Select(cityDropDown).selectByVisibleText(city);
//}
//public void clickSearch() {
//	search.click();
//}
//public boolean resultDisplay() {
//	return resultsContainer.isDisplayed();
//}
	

//	public static void main(String[] args) {
//	
//		SearchForSchools edu=new SearchForSchools();
//		Scanner sc=new Scanner(System.in);
//		String browser=sc.next();
//		edu.createDriver(browser);
//		edu.Eduvidya();
//		
//		driver.close();
//	}

